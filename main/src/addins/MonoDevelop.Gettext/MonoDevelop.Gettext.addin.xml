<Addin
        id = "Gettext"
        namespace = "MonoDevelop"
        name = "Gettext Translations Support"
        author = "Rafael 'Monoman' Teixeira\nDavid MakovskÃ½"
        copyright = "X11"
        url = "http://www.monodevelop.com/"
        description = "Provides support for adding/editing PO files."
        category = "IDE extensions"
        version = "0.19.0">

	<Runtime>
		<Import assembly = "MonoDevelop.Gettext.dll"/>
	</Runtime>

	<Dependencies>
		<Addin id="Core" version="0.19.0"/>
		<Addin id="Core.Gui" version="0.19.0"/>
		<Addin id="Projects" version="0.19.0"/>
		<Addin id="Projects.Gui" version="0.19.0"/>
		<Addin id="Ide" version="0.19.0"/>
		<Addin id="Components" version="0.19.0"/>
		<Addin id="DesignerSupport" version="0.19.0"/>
		<Addin id="Autotools" version="0.19.0"/>
		<Addin id="Deployment" version="0.19.0"/>
	</Dependencies>
	
	<!-- Extension Points -->
	
	<ExtensionPoint path = "/MonoDevelop/Deployment/ProjectBrowser/ContextMenu/TranslationProject" name="Translation project context menu">
		<ExtensionNodeSet id="MonoDevelop.Components.Commands.ItemSet"/>
	</ExtensionPoint>
	
	<ExtensionPoint path = "/MonoDevelop/Deployment/ProjectBrowser/ContextMenu/Translation" name="Translation context menu">
		<ExtensionNodeSet id="MonoDevelop.Components.Commands.ItemSet"/>
	</ExtensionPoint>

	<ExtensionPoint path = "/MonoDevelop/Gettext/FileScanners" name="File scanners">
		<ExtensionNode name="Scanner" />
		<ExtensionNode name="RegexScanner" type="MonoDevelop.Gettext.ExtensionNodes.RegexScannerExtensionNode" />
		<ExtensionNode name="XmlRegexScanner" type="MonoDevelop.Gettext.ExtensionNodes.XmlRegexScannerExtensionNode" />
	</ExtensionPoint>
	
	<!-- Extensions -->

	<Extension path = "/MonoDevelop/Core/Applications">
		<Application id = "gettext-update" class = "MonoDevelop.Gettext.GettextTool" description = "Gettext update tool"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/Commands">
		<Command id   = "MonoDevelop.Gettext.Commands.AddTranslation"
		         icon = "md-gettext-locale"
		         _label = "Add Translation..."
			     _description = "Add another translation (language) for a solution or project" />
		<Command id   = "MonoDevelop.Gettext.Commands.UpdateTranslations"
		         _label = "Update Translations"
			     _description = "Updates all translation files." />
	</Extension>	
	
	<Extension path = "/MonoDevelop/Core/StockIcons" extension-nodes = "StockIcon" description = "Stock icons|Available from MonoDevelop.Gettext.Resources.">
		<StockIcon stockid = "md-gettext-locale" resource = "locale_22x22.png.png" />
		<StockIcon stockid = "md-gettext-locale" resource = "locale_16x16.png" size = "Menu" />
		<StockIcon stockid = "md-gettext-locale" resource = "locale_22x22.png" size = "Button" />
		<StockIcon stockid = "md-gettext-locale" resource = "locale_32x32.png" size = "Dialog" />
		<StockIcon stockid = "md-gettext-project" icon = "md-project|res:gettext-overlay-16.png" size = "Menu" />
		<StockIcon stockid = "md-gettext-project" icon = "md-project|res:gettext-overlay-32.png" size = "Dnd"/>
		<StockIcon stockid = "md-gettext-project" icon = "md-project|res:gettext-overlay-32.png" size = "Dialog" />
	</Extension>
	
	<Extension path = "/MonoDevelop/ProjectModel/Gui/Icons">
		<Icon extensions = ".po" icon = "res:locale.svg"/>
	</Extension>

	<Extension path = "/MonoDevelop/Ide/FileFilters">
		<FileFilter id = "PoFiles" _label = "PO Files" extensions = "*.po"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/DisplayBindings">
		<DisplayBinding id = "GettextEditor" supportedextensions = ".po" class = "MonoDevelop.Gettext.GettextEditorDisplayBinding"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/ProjectModel/SerializableClasses">
		<DataType class = "MonoDevelop.Gettext.TranslationProject" />
		<DataType class = "MonoDevelop.Gettext.TranslationProjectConfiguration" />
	</Extension>

	<Extension path = "/MonoDevelop/Deployment/ProjectBrowser/ContextMenu/TranslationProject">
		<CommandItem id = "MonoDevelop.Ide.Commands.ProjectCommands.Build" />
		<CommandItem id = "MonoDevelop.Ide.Commands.ProjectCommands.Rebuild" />
		<CommandItem id = "MonoDevelop.Ide.Commands.ProjectCommands.Clean" />
		<SeparatorItem />
		<CommandItem id = "MonoDevelop.Gettext.Commands.AddTranslation" />
		<CommandItem id = "MonoDevelop.Gettext.Commands.UpdateTranslations" />
		<SeparatorItem />
		<CommandItem id = "MonoDevelop.Ide.Commands.ProjectCommands.Options" />
		<SeparatorItem />
		<CommandItem id = "MonoDevelop.Ide.Commands.EditCommands.Delete" />
	</Extension>
	
	<Extension path = "/MonoDevelop/Deployment/ProjectBrowser/ContextMenu/Translation">
		<CommandItem id = "MonoDevelop.Ide.Commands.ViewCommands.Open" />
		<SeparatorItem />
		<CommandItem id = "MonoDevelop.Ide.Commands.EditCommands.Delete" />
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/ProjectTemplates">
		<ProjectTemplate id = "MonoDevelop.Gettext.TranslationInfo" resource = "TranslationProject.xpt.xml" />
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/Pads/ProjectPad">
		<NodeBuilder class = "MonoDevelop.Gettext.NodeBuilders.TranslationProjectNodeBuilder"/>
		<NodeBuilder class = "MonoDevelop.Gettext.NodeBuilders.TranslationNodeBuilder"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/StartupHandlers">
		<Class class = "MonoDevelop.Gettext.TranslationServiceStartupCommand"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/DesignerSupport/PropertyProviders">
		<Class class = "MonoDevelop.Gettext.PropertyProvider"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/ProjectModel/ExtendedProperties">
		<ItemProperty class = "MonoDevelop.Projects.ProjectFile"
			name = "Gettext.ScanForTranslations" type = "System.Boolean" />
	</Extension>
	
	<Extension path = "/MonoDevelop/Ide/ProjectFeatures">
		<Class class = "MonoDevelop.Gettext.GettextFeature" />
	</Extension>

	<Extension path = "/MonoDevelop/Autotools/MakefileHandlers">
		<Class class = "MonoDevelop.Gettext.MakefileHandler"/>
	</Extension>
	
	<Extension path = "/MonoDevelop/Gettext/FileScanners">
		<XmlRegexScanner extension="glade">
			<Include regex='translatable\s*=\s*"yes"\s*&gt;([^&lt;]*)&lt;'/>
		</XmlRegexScanner>
		<XmlRegexScanner extension="xml" mimeType="application/xml">
			<Include regex='\s_[-A-Za-z0-9._:]+\s*=\s*"([^"]+)"'/>
			<Include regex="&lt;_[^&gt;]+&gt;((?:.|\n)*?)&lt;/_[^&gt;]+&gt;" />
		</XmlRegexScanner>
		<RegexScanner extension="vb">
			<Exclude regex='".*?[^"]"(?!")' />   <!-- Strings-->
			<Exclude regex="'(?:(?!').)*" />     <!-- Line comments -->
			<Include regex='GetString\s*\(\s*"(.*?[^\\])"' />
			<Include regex='GetPluralString\s*\(\s*"(.*?[^\\])"\s*,\s*"(.*?[^\\])"' plural="true"/>
			<Transform regex='""' value='"' />
		</RegexScanner>
		<RegexScanner extension="boo">
			<Exclude regex='".*?"' />               <!-- Strings -->
			<Exclude regex="'.*?'" />               <!-- Strings -->
			<Exclude regex='"""(?:.|\n)*?"""' />    <!-- Strings -->
			<Exclude regex='//(?:(?!//).)*' />      <!-- Line comments -->
			<Exclude regex='/\*(?:.|\n)*?\*/' />    <!-- Block comments -->
			<Include regex='GetString\s*\(\s*"(.*?[^\\])"' />
			<Include regex='GetPluralString\s*\(\s*"(.*?[^\\])"\s*,\s*"(.*?[^\\])"' plural="true"/>
		</RegexScanner>
		<RegexScanner extension="cs">
			<Exclude regex='@".*?"' />	                  <!-- Strings starting with @ -->
			<Exclude regex='(?&lt;!@)".*?(?&lt;!\\)"' />  <!-- Strings-->
			<Exclude regex='//(?:(?!//).)*' />            <!-- Line comments -->
			<Exclude regex='/\*(?:.|\n)*?\*/' />          <!-- Block comments -->
			<Include regex='GetString\s*\(\s*"(.*?[^\\])"\s*[,\)]' regexOptions="Singleline"/>
			<Include regex='GetPluralString\s*\(\s*"(.*?[^\\])"\s*,\s*"(.*?[^\\])"\s*[,\)]' plural="true" regexOptions="Singleline"/>
			<Transform regex='([^\\])"\s*\+\s*"' value='$1' regexOptions="Singleline"/>
		</RegexScanner>
	</Extension>
</Addin>
